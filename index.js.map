{"version":3,"file":"index.js","sources":["../src/img/cross.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBrZVhDoIwDIUrgfDXm+hRvBFwEr0BXsXjsJnMFVkYsvUV4SWL6Nr3MWgrUUbW2sYY6zSLY3M+Zc7cOWr9evqvL5J18av1OVRVVUdI4c6HwTxIKY5FJ/nbXA3ZYw4hR5hnIZK5MeaKDFMxC8jX3PapRPTi5lJOQWzPewHQpgz49xxkPrmcKwJyEGQe55UEVNdV64P5cmwm1tSEHe+hfAj4hUwAlTmrIKWKglzqGkl1gmg2hVmjnj0QEJuHxxK/EwiRqkGqFqmE433YaJpSFBttDnrfUxACSsWw1+LmJMhWrcyDjoBkzY+AQPM9EMl81QdhLJxOrvGfZ1L96bvblvExaj4JXtJj+QAn5UUxjHYd+gAAAABJRU5ErkJggg==\"","import axios from 'axios';\n\nexport async function getImages(userQuery, page = 1, per_page) {\n  const { data } = await axios(`https://pixabay.com/api/`, {\n    params: {\n      key: `49445934-7dcc9965669d62101dac3c068`,\n      q: userQuery,\n      image_type: `photo`,\n      orientation: `horizontal`,\n      safesearch: true,\n      page,\n      per_page,\n    },\n  });\n\n  return data;\n}\n","// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector(`.gallery`);\n\nconst gallery = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\" />\n        </a>\n        <div class=\"description-container\">\n        <div class=\"description\">\n          <p class=\"description-text\">Likes</p>\n          <span class=\"description-num\">${likes}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Views</p>\n          <span class=\"description-num\">${views}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Comments</p>\n          <span class=\"description-num\">${comments}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Downloads</p>\n          <span class=\"description-num\">${downloads}</span>\n        </div>\n        </div>\n      </li>`\n    )\n    .join(``);\n  list.insertAdjacentHTML(`beforeend`, markup);\n  gallery.refresh();\n}\n\nexport function cleanGallery() {\n  list.innerHTML = ``;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconError from './img/cross.png';\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery, cleanGallery } from './js/render-functions';\n\nlet userAnswer = '';\nlet page = 1;\nconst per_page = 15;\nlet totalHits = 0;\n\nconst iziToastNoMatches = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again',\n  iconUrl: iconError,\n  position: 'topRight',\n  messageColor: '#fff',\n  backgroundColor: '#ef4040',\n  theme: 'dark',\n  maxWidth: '432px',\n};\n\nconst iziToastEndResults = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: 'topRight',\n  messageColor: '#FAFAFB',\n  backgroundColor: '#00CED1',\n  theme: 'dark',\n  maxWidth: '432px',\n};\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst paginationButton = document.querySelector('.pagination-btn');\n\nform.addEventListener('submit', formSubmit);\npaginationButton.addEventListener('click', handlePagination);\n\nasync function formSubmit(event) {\n  event.preventDefault();\n  userAnswer = event.currentTarget.elements.searchText.value.trim();\n\n  if (!userAnswer) {\n    iziToast.error({\n      message: 'Please, enter search word',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  cleanGallery();\n  hidePaginationButton();\n  showLoader();\n\n  try {\n    const { hits, totalHits: total } = await getImages(\n      userAnswer,\n      page,\n      per_page\n    );\n    totalHits = total;\n\n    if (!hits.length) {\n      iziToast.show(iziToastNoMatches);\n      return;\n    }\n\n    renderGallery(hits);\n    checkPaginationAvailability();\n  } catch {\n    iziToast.error({\n      message: 'An error occurred while fetching images.',\n      position: 'topRight',\n    });\n  } finally {\n    form.reset();\n    hideLoader();\n  }\n}\n\nasync function handlePagination() {\n  page++;\n  hidePaginationButton();\n  showLoader();\n\n  try {\n    const { hits } = await getImages(userAnswer, page, per_page);\n    renderGallery(hits);\n\n    window.scrollBy({\n      top:\n        document.querySelector('.gallery-item').getBoundingClientRect().height *\n        2,\n      behavior: 'smooth',\n    });\n\n    checkPaginationAvailability();\n  } catch {\n    iziToast.error({\n      message: 'An error occurred while fetching images.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction checkPaginationAvailability() {\n  const loadedImages = page * per_page;\n\n  // Ограничиваем количество загружаемых изображений\n  const maxImagesLimit = 45;\n\n  if (loadedImages >= totalHits || loadedImages >= maxImagesLimit) {\n    iziToast.info(iziToastEndResults);\n    hidePaginationButton();\n  } else {\n    showPaginationButton();\n  }\n}\n\nfunction showLoader() {\n  loader.style.display = 'flex';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showPaginationButton() {\n  paginationButton.style.display = 'block';\n}\nfunction hidePaginationButton() {\n  paginationButton.style.display = 'none';\n}\n"],"names":["iconError","getImages","userQuery","page","per_page","data","axios","list","gallery","SimpleLightbox","renderGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cleanGallery","userAnswer","totalHits","iziToastNoMatches","iziToastEndResults","form","loader","paginationButton","formSubmit","handlePagination","event","iziToast","hidePaginationButton","showLoader","hits","total","checkPaginationAvailability","hideLoader","loadedImages","showPaginationButton"],"mappings":"+vBAAA,MAAeA,EAAA,ihBCER,eAAeC,EAAUC,EAAWC,EAAO,EAAGC,EAAU,CAC7D,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,2BAA4B,CACvD,OAAQ,CACN,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACD,CACL,CAAG,EAED,OAAOC,CACT,CCZA,MAAME,EAAO,SAAS,cAAc,UAAU,EAExCC,EAAU,IAAIC,EAAe,gBAAiB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BN,CAAa;AAAA,sBAC/BC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKNC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0CAIRC,CAAS;AAAA;AAAA;AAAA,YAI9C,EACA,KAAK,EAAE,EACVZ,EAAK,mBAAmB,YAAaK,CAAM,EAC3CJ,EAAQ,QAAO,CACjB,CAEO,SAASY,GAAe,CAC7Bb,EAAK,UAAY,EACnB,CC/CA,IAAIc,EAAa,GACblB,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIkB,EAAY,EAEhB,MAAMC,EAAoB,CACxB,QACE,0EACF,QAASvB,EACT,SAAU,WACV,aAAc,OACd,gBAAiB,UACjB,MAAO,OACP,SAAU,OACZ,EAEMwB,EAAqB,CACzB,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,UACjB,MAAO,OACP,SAAU,OACZ,EAEMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAmB,SAAS,cAAc,iBAAiB,EAEjEF,EAAK,iBAAiB,SAAUG,CAAU,EAC1CD,EAAiB,iBAAiB,QAASE,CAAgB,EAE3D,eAAeD,EAAWE,EAAO,CAI/B,GAHAA,EAAM,eAAc,EACpBT,EAAaS,EAAM,cAAc,SAAS,WAAW,MAAM,OAEvD,CAACT,EAAY,CACfU,EAAS,MAAM,CACb,QAAS,4BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED5B,EAAO,EACPiB,IACAY,IACAC,IAEA,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,UAAWC,CAAK,EAAK,MAAMlC,EACvCoB,EACAlB,EACAC,CACN,EAGI,GAFAkB,EAAYa,EAER,CAACD,EAAK,OAAQ,CAChBH,EAAS,KAAKR,CAAiB,EAC/B,MACD,CAEDb,EAAcwB,CAAI,EAClBE,GACJ,MAAU,CACNL,EAAS,MAAM,CACb,QAAS,2CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,EAAK,MAAK,EACVY,GACD,CACH,CAEA,eAAeR,GAAmB,CAChC1B,IACA6B,IACAC,IAEA,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMjC,EAAUoB,EAAYlB,EAAMC,CAAQ,EAC3DM,EAAcwB,CAAI,EAElB,OAAO,SAAS,CACd,IACE,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAChE,EACF,SAAU,QAChB,CAAK,EAEDE,GACJ,MAAU,CACNL,EAAS,MAAM,CACb,QAAS,2CACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRM,GACD,CACH,CAEA,SAASD,GAA8B,CACrC,MAAME,EAAenC,EAAOC,EAKxBkC,GAAgBhB,GAAagB,GAFV,IAGrBP,EAAS,KAAKP,CAAkB,EAChCQ,KAEAO,GAEJ,CAEA,SAASN,GAAa,CACpBP,EAAO,MAAM,QAAU,MACzB,CACA,SAASW,GAAa,CACpBX,EAAO,MAAM,QAAU,MACzB,CAEA,SAASa,GAAuB,CAC9BZ,EAAiB,MAAM,QAAU,OACnC,CACA,SAASK,GAAuB,CAC9BL,EAAiB,MAAM,QAAU,MACnC"}